!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t){e.exports={version:"1.0.0",title:"EcoStruxure Machine Advisor",uuid:"e19b3acb-8b0a-4bc9-be12-7c470cbc843f",author:{name:"Andreas Roeser",email:"andreas.roeser@moxa.com"},image:"http://placehold.it/220x150",description:"Schneider EcoStruxure Setting UI",route:{state:"e19b3acb-8b0a-4bc9-be12-7c470cbc843f.secos",url:"/secos"},authenticate:["root","admin","user"],files:["sanji-secos.js"],get:{url:"/resource/secos",type:"model"},put:{url:"/resource/secos",type:"model"},fields:[{key:"enable",type:"switch",templateOptions:{label:"Enable"}},{key:"cloud_conn_status",type:"cloud_connection",templateOptions:{label:"Remote connection status",event:"CCS/secos"}},{key:"broker",type:"input",templateOptions:{label:"broker-url",required:!0}},{key:"username",type:"input",templateOptions:{label:"Username",required:!0}},{key:"clientid",type:"input",templateOptions:{label:"client-id",required:!0}},{key:"password",type:"input",templateOptions:{label:"Password/Token",required:!0}},{key:"assetname",type:"input",templateOptions:{label:"Asset Name",required:!0}},{key:"publish_interval",type:"number",templateOptions:{label:"Publish Interval (sec.)",placeholder:"(1 - 65535 sec)",required:!0,min:"1",max:"65535"}},{key:"devicetags",type:"tag_selector",templateOptions:{basePath:"/api/v1"}},{key:"keepalive",type:"input",templateOptions:{label:"Keepalive (sec.)"}},{key:"cleansession",type:"checkbox",templateOptions:{label:"Clean Session"}},{key:"enabletls",type:"checkbox",templateOptions:{label:"Enable TLS"}},{key:"sendsystemstatus",type:"checkbox",templateOptions:{label:"Send System Status (CPU-,Memory-,Disk-Usage)"}}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"sjSecos",function(){return l});var r=n(2),a=n(3),o=n(6),i=n(7),s=n(8),c=n(10),u=n(12);n.d(t,"SecosAction",function(){return o.b}),n.d(t,"secos",function(){return o.d}),n.d(t,"GET_SECOS",function(){return o.a}),n.d(t,"UPDATE_SECOS",function(){return o.c});var l=angular.module("sanji.secos",[]).config(a.a).factory("secosAction",o.b).service("secosService",i.a).component("sanjiSecosContainer",s.a).component("sanjiSecos",c.a).component("sanjiSecosWindow",u.a).run(["reduxHelper",function(e){"ngInject";e.injectAsyncReducer("secos",o.d)}]).run(r.a).name},function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a=["routerHelper",function(e){"ngInject";e.configureStates(function(){return[{state:"e19b3acb-8b0a-4bc9-be12-7c470cbc843f",config:{abstract:!0,url:"/application",template:"<ui-view></ui-view>"}},{state:a.a.route.state,config:{url:a.a.route.url,template:'<div layout="row" layout-padding layout-align="center center">\n                      <div flex="33">\n                        <sanji-secos-window></sanji-secos-window>\n                      </div>\n                    </div>',authenticate:a.a.authenticate,title:a.a.title}}]}())}]},function(e,t,n){"use strict";var r=n(4),a=n.n(r),o=n(5),i=n.n(o);t.a=["$translateProvider",function(e){"ngInject";e.translations("en",a.a),e.translations("zh-tw",i.a)}]},function(e,t){e.exports={SECOS:"Secos",SECOS_DESCRIPTION:"Schneider EcoStruxure Setting UI",SECOS_FORM_SETTING:"Setting",SECOS_FORM_SAVE:"Save",SECOS_FORM_SAVE_SUCCESS:"Update data successfully."}},function(e,t){e.exports={SECOS:"Secos",SECOS_DESCRIPTION:"Schneider EcoStruxure Setting UI",SECOS_FORM_SETTING:"è¨­å®š",SECOS_FORM_SAVE:"å„²å­˜",SECOS_FORM_SAVE_SUCCESS:"æ›´æ–°è³‡æ–™æˆ�åŠŸ"}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"d",function(){return i});var r="GET_SECOS",a="UPDATE_SECOS",o=function(e,t){"ngInject";return{getSecos:function(n){return function(a,o){var i=o(),s=i.secos;return n&&!n.force&&Object.keys(s).length?e.when(s).then(function(){return a({type:r,payload:s})}):t.get().then(function(e){return a({type:r,payload:e})})}},updateSecos:function(e){return function(n){return e.formOptions.files?t.upload(e).then(function(){e.formOptions={},n({type:a,payload:e})}):t.update(e).then(function(){return n({type:a,payload:e})})}}}};o.$inject=["$q","secosService"];var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=t.type,o=t.payload;switch(n){case r:return o||e;case a:return Object.assign({},e,o);default:return e}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(0),o=n.n(a),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=["$q","rest","exception","pathToRegexp","$filter","logger"],c=function(){function e(){for(var t=this,n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];r(this,e),e.$inject.forEach(function(e,n){return t[e]=a[n]}),this.message={read:{error:"[SecosService] Get data error."},update:{success:"SECOS_FORM_SAVE_SUCCESS",error:"[SecosService] Update data error."}},this.restConfig={basePath:void 0}}return i(e,[{key:"_transform",value:function(e){return{content:e,formOptions:{},fields:o.a.fields}}},{key:"get",value:function(){var e=this,t=this.pathToRegexp.compile(o.a.get.url);return this.rest.get(t(),this.restConfig).then(function(t){return e._transform(t.data)}).catch(function(t){return e.exception.catcher(e.$filter("translate")(e.message.read.error))(t),e.$q.reject()})}},{key:"update",value:function(e){var t=this,n=this.pathToRegexp.compile(o.a.put.url),r=void 0!==e.content.id?n({id:e.content.id}):n();return this.rest.put(r,e.content,e.formOptions.files,this.restConfig).then(function(e){return t.logger.success(t.$filter("translate")(t.message.update.success),e.data),e.data}).catch(function(e){return t.exception.catcher(t.$filter("translate")(t.message.update.error))(e),t.$q.reject()})}},{key:"upload",value:function(e){var t=this,n=this.pathToRegexp.compile(o.a.put.url),r=void 0!==e.content.id?n({id:e.content.id}):n(),a={params:{resource:r}};return this.rest.put("/helper/upload",{jsonData:JSON.stringify(e.content)},e.formOptions.files,a).then(function(e){return t.logger.success(t.$filter("translate")(t.message.update.success),e.data),e.data}).catch(function(e){return t.exception.catcher(t.$filter("translate")(t.message.update.error))(e),t.$q.reject()})}}]),e}();c.$inject=s,t.a=c},function(e,t,n){"use strict";var r=n(9),a={template:'<sanji-secos data="$ctrl.data" on-submit="$ctrl.onSave($event)"  on-authorized="$ctrl.onAuthorized($event)"></sanji-secos>',controller:r.a};t.a=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=["$scope","$ngRedux","sanjiWindowService","secosAction","auth"],i=function(){function e(){for(var t=this,n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];r(this,e),e.$inject.forEach(function(e,n){return t[e]=a[n]})}return a(e,[{key:"$onInit",value:function(){this.sanjiWindowMgr=this.sanjiWindowService.get("sanji-secos"),this.unhandler=this.$scope.$on("sj:window:refresh",this.onRefresh.bind(this)),this.unsubscribe=this.$ngRedux.connect(this.mapStateToThis,this.secosAction)(this),this.sanjiWindowMgr.promise=this.getSecos()}},{key:"$onDestroy",value:function(){this.unsubscribe(),this.unhandler()}},{key:"mapStateToThis",value:function(e){return{data:e.secos}}},{key:"onAuthorized",value:function(e){return this.auth.isAuthorized(e.roles)}},{key:"onRefresh",value:function(e,t){"sanji-secos"===t.id&&(this.sanjiWindowMgr.promise=this.getSecos({force:!0}))}},{key:"onSave",value:function(e){this.sanjiWindowMgr.promise=this.updateSecos(e.data)}}]),e}();i.$inject=o,t.a=i},function(e,t,n){"use strict";var r=n(11),a={bindings:{data:"<",submitCallback:"&onSubmit",onAuthorized:"&"},template:'\n    \n    <form ng-submit="$ctrl.save($ctrl.data)" role="form" layout="column" layout-padding novalidate>\n      <formly-form\n        model="$ctrl.data.content"\n        fields="$ctrl.data.fields"\n        options="$ctrl.data.formOptions"\n        form="$ctrl.form">\n        <div layout layout-align="end center">\n          <md-button type="submit" class="md-raised md-primary" aria-label="Submit"\n          ng-disabled="$ctrl.form.$invalid || !$ctrl.isAuthorized([\'root\', \'admin\'])">\n            <sapn translate="SECOS_FORM_SAVE"></span>\n          </md-button>\n        </div>\n      </formly-form>\n    </form>\n    \n  ',controller:r.a};t.a=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=[],i=function(){function e(){for(var t=this,n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];r(this,e),e.$inject.forEach(function(e,n){return t[e]=a[n]})}return a(e,[{key:"isAuthorized",value:function(e){return this.onAuthorized({$event:{roles:e}})}},{key:"save",value:function(e){this.submitCallback({$event:{data:e}})}}]),e}();i.$inject=o,t.a=i},function(e,t,n){"use strict";var r={template:'<sanji-window window-id="sanji-secos"\n              window-name="{{\'EcoStruxure Machine Advisor\' | translate}}"\n              show-loading-btn>\n              <sanji-window-state default-state\n                state-name="sanji-form"\n                link-name="{{\'SECOS_FORM_SETTING\' | translate}}"\n                icon="settings">\n                <sanji-secos-container></sanji-secos-container>\n              </sanji-window-state>\n            </sanji-window>'};t.a=r}]);